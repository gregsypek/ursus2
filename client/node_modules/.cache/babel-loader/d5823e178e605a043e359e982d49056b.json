{"ast":null,"code":"import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport axios from \"axios\";\nimport API from \"../api.js\";\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    user: null\n  },\n  mutations: {\n    SET_USER_DATA(state, userData) {\n      state.user = userData;\n      localStorage.setItem(\"user\", JSON.stringify(userData));\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${userData.token}`;\n      console.log(\"state.user\", state.user);\n    },\n    CLEAR_USER_DATA() {\n      localStorage.removeItem(\"user\");\n      // state.user = null;\n      // axios.defaults.headers.common[\"Authorization\"] = null;\n      location.reload();\n    }\n  },\n  actions: {\n    async register({\n      commit\n    }, credentials) {\n      const data = await API.createUser(credentials);\n      // console.log(\"data from store\", data);\n      commit(\"SET_USER_DATA\", data);\n    },\n    async login({\n      commit\n    }, credentials) {\n      const data = await API.loginUser(credentials);\n      // console.log(\"data from store\", data);\n      commit(\"SET_USER_DATA\", data);\n    },\n    logout({\n      commit\n    }) {\n      commit(\"CLEAR_USER_DATA\");\n    }\n  },\n  getters: {\n    loggedIn(state) {\n      return !!state.user;\n      // return !!localStorage.getItem(\"user\");\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","axios","API","use","Store","state","user","mutations","SET_USER_DATA","userData","localStorage","setItem","JSON","stringify","defaults","headers","common","token","console","log","CLEAR_USER_DATA","removeItem","location","reload","actions","register","commit","credentials","data","createUser","login","loginUser","logout","getters","loggedIn"],"sources":["/Users/greg/Desktop/PROJECTS/URSUS/ursus2023/ursus2/client/src/vuex/store.js"],"sourcesContent":["import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport axios from \"axios\";\nimport API from \"../api.js\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n\tstate: {\n\t\tuser: null,\n\t},\n\tmutations: {\n\t\tSET_USER_DATA(state, userData) {\n\t\t\tstate.user = userData;\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(userData));\n\t\t\taxios.defaults.headers.common[\n\t\t\t\t\"Authorization\"\n\t\t\t] = `Bearer ${userData.token}`;\n\t\t\tconsole.log(\"state.user\", state.user);\n\t\t},\n\t\tCLEAR_USER_DATA() {\n\t\t\tlocalStorage.removeItem(\"user\");\n\t\t\t// state.user = null;\n\t\t\t// axios.defaults.headers.common[\"Authorization\"] = null;\n\t\t\tlocation.reload();\n\t\t},\n\t},\n\tactions: {\n\t\tasync register({ commit }, credentials) {\n\t\t\tconst data = await API.createUser(credentials);\n\t\t\t// console.log(\"data from store\", data);\n\t\t\tcommit(\"SET_USER_DATA\", data);\n\t\t},\n\t\tasync login({ commit }, credentials) {\n\t\t\tconst data = await API.loginUser(credentials);\n\t\t\t// console.log(\"data from store\", data);\n\t\t\tcommit(\"SET_USER_DATA\", data);\n\t\t},\n\t\tlogout({ commit }) {\n\t\t\tcommit(\"CLEAR_USER_DATA\");\n\t\t},\n\t},\n\tgetters: {\n\t\tloggedIn(state) {\n\t\t\treturn !!state.user;\n\t\t\t// return !!localStorage.getItem(\"user\");\n\t\t},\n\t},\n});\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,GAAG,MAAM,WAAW;AAE3BH,GAAG,CAACI,GAAG,CAACH,IAAI,CAAC;AAEb,eAAe,IAAIA,IAAI,CAACI,KAAK,CAAC;EAC7BC,KAAK,EAAE;IACNC,IAAI,EAAE;EACP,CAAC;EACDC,SAAS,EAAE;IACVC,aAAa,CAACH,KAAK,EAAEI,QAAQ,EAAE;MAC9BJ,KAAK,CAACC,IAAI,GAAGG,QAAQ;MACrBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ,CAAC,CAAC;MACtDR,KAAK,CAACa,QAAQ,CAACC,OAAO,CAACC,MAAM,CAC5B,eAAe,CACf,GAAI,UAASP,QAAQ,CAACQ,KAAM,EAAC;MAC9BC,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEd,KAAK,CAACC,IAAI,CAAC;IACtC,CAAC;IACDc,eAAe,GAAG;MACjBV,YAAY,CAACW,UAAU,CAAC,MAAM,CAAC;MAC/B;MACA;MACAC,QAAQ,CAACC,MAAM,EAAE;IAClB;EACD,CAAC;EACDC,OAAO,EAAE;IACR,MAAMC,QAAQ,CAAC;MAAEC;IAAO,CAAC,EAAEC,WAAW,EAAE;MACvC,MAAMC,IAAI,GAAG,MAAM1B,GAAG,CAAC2B,UAAU,CAACF,WAAW,CAAC;MAC9C;MACAD,MAAM,CAAC,eAAe,EAAEE,IAAI,CAAC;IAC9B,CAAC;IACD,MAAME,KAAK,CAAC;MAAEJ;IAAO,CAAC,EAAEC,WAAW,EAAE;MACpC,MAAMC,IAAI,GAAG,MAAM1B,GAAG,CAAC6B,SAAS,CAACJ,WAAW,CAAC;MAC7C;MACAD,MAAM,CAAC,eAAe,EAAEE,IAAI,CAAC;IAC9B,CAAC;IACDI,MAAM,CAAC;MAAEN;IAAO,CAAC,EAAE;MAClBA,MAAM,CAAC,iBAAiB,CAAC;IAC1B;EACD,CAAC;EACDO,OAAO,EAAE;IACRC,QAAQ,CAAC7B,KAAK,EAAE;MACf,OAAO,CAAC,CAACA,KAAK,CAACC,IAAI;MACnB;IACD;EACD;AACD,CAAC,CAAC"},"metadata":{},"sourceType":"module"}