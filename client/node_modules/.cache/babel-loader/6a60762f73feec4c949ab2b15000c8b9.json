{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport API from \"../api\";\nexport default {\n  data() {\n    return {\n      rules: [value => !!value || \"This field is required!\"],\n      infoRules: [value => !!value || \"Informations about post are required\", value => value.length > 9 || \"A post info must have more or equal then 10 characters\"],\n      formValidity: false,\n      post: {\n        name: \"\",\n        price: \"\",\n        info: \"\",\n        image: \"\"\n      },\n      image: \"\"\n    };\n  },\n  async created() {\n    const response = await API.getPostByID(this.$route.params.id);\n    this.post = response;\n  },\n  methods: {\n    selectFile(file) {\n      console.log(\"ðŸš€ ~ file: AddPost.vue ~ line 37 ~ selectFile ~ file\", file);\n      this.image = file[0];\n    },\n    async updateForm() {\n      const formData = new FormData();\n      formData.append(\"image\", this.image);\n      formData.append(\"old_image\", this.post.image);\n      formData.append(\"name\", this.post.name);\n      formData.append(\"price\", this.post.price);\n      formData.append(\"info\", this.post.info);\n      if (this.$refs.editPostForm.validate()) {\n        const response = await API.updatePost(this.$route.params.id, formData);\n        this.$router.push({\n          name: \"home\",\n          params: {\n            message: response.message\n          }\n        });\n      }\n    },\n    resetValidation() {\n      this.$refs.editPostForm.resetValidation();\n    },\n    resetForm() {\n      this.$refs.editPostForm.reset();\n    },\n    validateForm() {\n      this.$refs.editPostForm.validate();\n    }\n  }\n};","map":{"version":3,"mappings":";AAyGA;AACA;EACAA;IACA;MACAC;MACAC,YACAC,4DACAA,SACAA,oBACA,yDACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAA;IACA;EACA;EACA;IACA;IACA;EACA;EACAC;IACAC;MACAC;MACA;IACA;IACA;MACA;MACAC;MACAA;MACAA;MACAA;MACAA;MACA;QACA;QACA;UACAP;UACAQ;YAAAC;UAAA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["data","rules","infoRules","value","formValidity","post","name","price","info","image","methods","selectFile","console","formData","params","message","resetValidation","resetForm","validateForm"],"sourceRoot":"src/views","sources":["EditPost.vue"],"sourcesContent":["<template>\n\t<section class=\"my-5\">\n\t\t<div class=\"container\">\n\t\t\t<div class=\"d-flex row justify-content-center g-5\">\n\t\t\t\t<aside class=\"d-none d-lg-block col-3\">\n\t\t\t\t\t<div class=\"rounded\">\n         \n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<!-- <img\n\t\t\t\t\t\t\t\tsrc=\"../../src/assets/logo-ursus.png\"\n\t\t\t\t\t\t\t\talt=\"logo\"\n\t\t\t\t\t\t\t\tclass=\"d-none d-xxl-block\"\n\t\t\t\t\t\t\t/> -->           \n                 <img :src=\"`/${post.image}`\" width=\"100%\" class=\"d-none d-xxl-block \" ></img>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t</aside>\n\t\t\t\t<main class=\"row col-12 col-lg-9 g-5\">\n\t\t\t\t\t<!-- <h1 class=\"mt-0\">Add new Post</h1> -->\n\n\t\t\t\t\t<div class=\"col-md\">\n\t\t\t\t\t\t<v-container>\n\t\t\t\t\t\t\t<v-row no-gutters>\n\t\t\t\t\t\t\t\t<v-col sm=\"10\" class=\"mx-auto\">\n\t\t\t\t\t\t\t\t\t<v-card class=\"p-5 my-5\">\n\t\t\t\t\t\t\t\t\t\t<v-card-title>Edit This Post</v-card-title>\n\t\t\t\t\t\t\t\t\t\t<v-divider></v-divider>\n\t\t\t\t\t\t\t\t\t\t<v-form\n\t\t\t\t\t\t\t\t\t\t\tref=\"editPostForm\"\n\t\t\t\t\t\t\t\t\t\t\t@submit.prevent=\"updateForm\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"pa-5\"\n\t\t\t\t\t\t\t\t\t\t\tenctype=\"multipart/form-data\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"formValidity\"\n\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"post.name\"\n\t\t\t\t\t\t\t\t\t\t\t\tprepend-icon=\"mdi-note\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"rules\"\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t></v-text-field>\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Price\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"post.price\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tprepend-icon=\"mdi-view-list\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"rules\"\n\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t></v-text-field>\n\t\t\t\t\t\t\t\t\t\t\t<v-textarea\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Info\"\n\t\t\t\t\t\t\t\t\t\t\t\t:rules=\"infoRules\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"post.info\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcounter\n\t\t\t\t\t\t\t\t\t\t\t\tprepend-icon=\"mdi-note-plus\"\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t></v-textarea>\n\t\t\t\t\t\t\t\t\t\t\t<v-file-input\n\t\t\t\t\t\t\t\t\t\t\t\t@change=\"selectFile\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\t\t\tshow-size\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Select Image\"\n                        \n\t\t\t\t\t\t\t\t\t\t\t></v-file-input>\n                      <v-img :src=\"`/${post.image}`\" width=\"120\" class=\"d-block d-xxl-none\" ></v-img>\n\t\t\t\t\t\t\t\t\t\t\t<v-btn type=\"submit\" \t:disabled=\"!formValidity\" class=\"mt-3 me-3\">Update Post</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-3 me-3\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"validateForm\"\n\t\t\t\t\t\t\t\t\t\t\t\t>Validate Form</v-btn\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"warning\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-3 me-3 btn btn-validation\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"resetValidation\"\n\t\t\t\t\t\t\t\t\t\t\t\t>Reset Validation</v-btn\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<v-btn\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-3 me-3 btn btn-reset\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"resetForm\"\n\t\t\t\t\t\t\t\t\t\t\t\t>Reset</v-btn\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</v-form>\n\t\t\t\t\t\t\t\t\t</v-card>\n\t\t\t\t\t\t\t\t</v-col>\n\t\t\t\t\t\t\t</v-row>\n\t\t\t\t\t\t</v-container>\n\t\t\t\t\t</div>\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t</div>\n\t</section>\n</template>\n\n<!--  -->\n\n<script>\nimport API from \"../api\";\nexport default {\n  data() {\n    return {\n      rules: [(value) => !!value || \"This field is required!\"],\n      infoRules: [\n        (value) => !!value || \"Informations about post are required\",\n        (value) =>\n          value.length > 9 ||\n          \"A post info must have more or equal then 10 characters\",\n      ],\n      formValidity: false,\n      post: {\n        name: \"\",\n        price: \"\",\n        info: \"\",\n        image: \"\",\n      },\n      image: \"\",\n    };\n  },\n  async created() {\n    const response = await API.getPostByID(this.$route.params.id);\n    this.post = response;\n  },\n  methods: {\n    selectFile(file) {\n      console.log(\"ðŸš€ ~ file: AddPost.vue ~ line 37 ~ selectFile ~ file\", file);\n      this.image = file[0];\n    },\n    async updateForm() {\n      const formData = new FormData();\n      formData.append(\"image\", this.image);\n      formData.append(\"old_image\", this.post.image);\n      formData.append(\"name\", this.post.name);\n      formData.append(\"price\", this.post.price);\n      formData.append(\"info\", this.post.info);\n      if (this.$refs.editPostForm.validate()) {\n        const response = await API.updatePost(this.$route.params.id, formData);\n        this.$router.push({\n          name: \"home\",\n          params: { message: response.message },\n        });\n      }\n    },\n    resetValidation() {\n      this.$refs.editPostForm.resetValidation();\n    },\n    resetForm() {\n      this.$refs.editPostForm.reset();\n    },\n    validateForm() {\n      this.$refs.editPostForm.validate();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.v-messages__message {\n  color: var(--color-accent);\n}\n\naside h3 {\n  transform: rotate(0);\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}